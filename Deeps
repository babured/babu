#!/bin/bash

# Step 1: Define Git repository and branch
REPO_URL="https://github.com/yourusername/your-repo.git"
BRANCH="main"

# Step 2: Clone the repository
echo "Cloning the repository..."
git clone $REPO_URL

# Step 3: Change to the project directory
cd your-repo

# Step 4: Checkout the specified branch (in case it is not the default branch)
echo "Checking out the branch: $BRANCH..."
git checkout $BRANCH

# Step 5: Pull the latest changes (optional if you already cloned the repo)
echo "Pulling the latest changes..."
git pull origin $BRANCH

# Step 6: Build the project (Example using Maven)
echo "Building the project using Maven..."
mvn clean install

# Step 7: Deploy the build (e.g., copying the jar to a remote server)
echo "Deploying the artifact..."
scp target/myapp.jar user@remote-server:/path/to/deploy/

# Step 8: Optional: Push changes back to the repository (if any changes were made)
echo "Pushing changes back to the repository..."
git add .
git commit -m "Automated commit message"
git push origin $BRANCH

# Step 9: End of script
echo "Job execution finished."
